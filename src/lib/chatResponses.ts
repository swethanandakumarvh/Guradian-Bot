export type LanguageCode = 'en' | 'hi' | 'ta';

interface ChatResponseCategory {
  [key: string]: {
    [K in LanguageCode]: string;
  };
}

interface ChatResponses {
  [key: string]: {
    [K in LanguageCode]: string;
  } | ChatResponseCategory;
}

const chatResponses: ChatResponses = {
  'greeting': {
    'en': 'Hello! I\'m GuardianBot, your emergency response assistant. How can I help you today?\n\n1. Report Emergency ЁЯЪи\n2. Check Safety Tips ЁЯЫбя╕П\n3. Get Local Alerts ЁЯУв\n4. Request Support ЁЯдЭ',
    'hi': 'рдирдорд╕реНрддреЗ! рдореИрдВ рдЧрд╛рд░реНрдбрд┐рдпрди рдмреЙрдЯ рд╣реВрдВ, рдЖрдкрдХрд╛ рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд╕рд╣рд╛рдпрдХред рдЖрдЬ рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?\n\n1. рдЖрдкрд╛рддрдХрд╛рд▓ рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХрд░реЗрдВ ЁЯЪи\n2. рд╕реБрд░рдХреНрд╖рд╛ рдЯрд┐рдкреНрд╕ рджреЗрдЦреЗрдВ ЁЯЫбя╕П\n3. рд╕реНрдерд╛рдиреАрдп рдЕрд▓рд░реНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ ЁЯУв\n4. рд╕рд╣рд╛рдпрддрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ ЁЯдЭ',
    'ta': 'ро╡рогроХрпНроХроорпН! роиро╛ройрпН роХро╛ро░рпНроЯро┐ропройрпН рокро╛роЯрпН, роЙроЩрпНроХро│рпН роЕро╡роЪро░роХро╛ро▓ роЙродро╡ро┐ропро╛ро│ро░рпН. роЗройрпНро▒рпБ роиро╛ройрпН роОрокрпНрокроЯро┐ роЙродро╡ роорпБроЯро┐ропрпБроорпН?\n\n1. роЕро╡роЪро░роиро┐ро▓рпИ роЕро▒ро┐роХрпНроХрпИ ЁЯЪи\n2. рокро╛родрпБроХро╛рокрпНрокрпБ роХрпБро▒ро┐рокрпНрокрпБроХро│рпН ЁЯЫбя╕П\n3. роЙро│рпНро│рпВро░рпН роОроЪрпНроЪро░ро┐роХрпНроХрпИроХро│рпН ЁЯУв\n4. роЖродро░ро╡рпБ роХрпЛро░ро┐роХрпНроХрпИ ЁЯдЭ'
  },
  'emergency': {
    'type': {
      'en': 'What type of emergency are you reporting?\n\n1. Fire ЁЯФе\n2. Medical ЁЯЪС\n3. Crime ЁЯЪФ\n4. Natural Disaster ЁЯМкя╕П\n5. Other тЪая╕П',
      'hi': 'рдЖрдк рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдЖрдкрд╛рдд рд╕реНрдерд┐рддрд┐ рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХрд░ рд░рд╣реЗ рд╣реИрдВ?\n\n1. рдЖрдЧ ЁЯФе\n2. рдЪрд┐рдХрд┐рддреНрд╕рд╛ ЁЯЪС\n3. рдЕрдкрд░рд╛рдз ЁЯЪФ\n4. рдкреНрд░рд╛рдХреГрддрд┐рдХ рдЖрдкрджрд╛ ЁЯМкя╕П\n5. рдЕрдиреНрдп тЪая╕П',
      'ta': 'роОроирпНрод ро╡роХрпИропро╛рой роЕро╡роЪро░роиро┐ро▓рпИропрпИ роирпАроЩрпНроХро│рпН рокрпБроХро╛ро░рпН роЪрпЖропрпНроХро┐ро▒рпАро░рпНроХро│рпН?\n\n1. родрпА ЁЯФе\n2. рооро░рпБродрпНродрпБро╡роорпН ЁЯЪС\n3. роХрпБро▒рпНро▒роорпН ЁЯЪФ\n4. роЗропро▒рпНроХрпИ рокрпЗро░ро┤ро┐ро╡рпБ ЁЯМкя╕П\n5. рооро▒рпНро▒ро╡рпИ тЪая╕П'
    },
    'location': {
      'en': 'Please share your location to help us respond quickly. You can:\n\n1. Click "Share Location" button ЁЯУН\n2. Type your address manually\n3. Describe nearby landmarks',
      'hi': 'рдХреГрдкрдпрд╛ рд╣рдореЗрдВ рддреЗрдЬреА рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╕реНрдерд╛рди рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред рдЖрдк:\n\n1. "рд╕реНрдерд╛рди рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ ЁЯУН\n2. рдЕрдкрдирд╛ рдкрддрд╛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЯрд╛рдЗрдк рдХрд░реЗрдВ\n3. рдЖрд╕-рдкрд╛рд╕ рдХреЗ рд▓реИрдВрдбрдорд╛рд░реНрдХ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ',
      'ta': 'ро╡ро┐ро░рпИро╡ро╛роХ рокродро┐ро▓ро│ро┐роХрпНроХ роЙроЩрпНроХро│рпН роЗро░рпБрокрпНрокро┐роЯродрпНродрпИ рокроХро┐ро░ро╡рпБроорпН. роирпАроЩрпНроХро│рпН:\n\n1. "роЗро░рпБрокрпНрокро┐роЯродрпНродрпИ рокроХро┐ро░" рокрпКродрпНродро╛ройрпИ роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН ЁЯУН\n2. роЙроЩрпНроХро│рпН роорпБроХро╡ро░ро┐ропрпИ роХрпИроорпБро▒рпИропро╛роХ родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНропро╡рпБроорпН\n3. роЕро░рпБроХро┐ро▓рпБро│рпНро│ роиро┐ро▓роХрпНроХрпБро▒ро┐ропрпАроЯрпБроХро│рпИ ро╡ро┐ро╡ро░ро┐роХрпНроХро╡рпБроорпН'
    },
    'confirmation': {
      'en': 'ЁЯЪи Emergency reported! Help is on the way.\n\nEmergency ID: #{id}\nType: {type}\nLocation: {location}\n\nStay on this chat. I\'ll update you on the response status.',
      'hi': 'ЁЯЪи рдЖрдкрд╛рддрдХрд╛рд▓ рд░рд┐рдкреЛрд░реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛! рд╕рд╣рд╛рдпрддрд╛ рдЖ рд░рд╣реА рд╣реИред\n\nрдЖрдкрд╛рддрдХрд╛рд▓реАрди ID: #{id}\nрдкреНрд░рдХрд╛рд░: {type}\nрд╕реНрдерд╛рди: {location}\n\nрдЗрд╕ рдЪреИрдЯ рдкрд░ рдмрдиреЗ рд░рд╣реЗрдВред рдореИрдВ рдЖрдкрдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХрд░реВрдВрдЧрд╛ред',
      'ta': 'ЁЯЪи роЕро╡роЪро░роиро┐ро▓рпИ рокрпБроХро╛ро░рпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ! роЙродро╡ро┐ ро╡ро░рпБроХро┐ро▒родрпБ.\n\nроЕро╡роЪро░ ID: #{id}\nро╡роХрпИ: {type}\nроЗроЯроорпН: {location}\n\nроЗроирпНрод роЕро░роЯрпНроЯрпИропро┐ро▓рпН роЗро░рпБроЩрпНроХро│рпН. рокродро┐ро▓рпН роиро┐ро▓рпИропрпИ роиро╛ройрпН рокрпБродрпБрокрпНрокро┐рокрпНрокрпЗройрпН.'
    }
  },
  'mental_support': {
    'calming': {
      'en': 'I understand you\'re feeling anxious. That\'s completely normal in emergency situations. Take slow, deep breaths. I\'m here with you.',
      'hi': 'рдореИрдВ рд╕рдордЭрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдШрдмрд░рд╛рдП рд╣реБрдП рд╣реИрдВред рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдРрд╕рд╛ рд╣реЛрдирд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рд╣реИред рдзреАрдореА, рдЧрд╣рд░реА рд╕рд╛рдВрд╕реЗрдВ рд▓реЗрдВред рдореИрдВ рдЖрдкрдХреЗ рд╕рд╛рде рд╣реВрдВред',
      'ta': 'роирпАроЩрпНроХро│рпН рокродро▒рпНро▒рооро╛роХ роЗро░рпБрокрпНрокродрпИ роиро╛ройрпН рокрпБро░ро┐роирпНродрпБ роХрпКро│рпНроХро┐ро▒рпЗройрпН. роЕро╡роЪро░ роиро┐ро▓рпИроорпИроХро│ро┐ро▓рпН роЗродрпБ роорпБро▒рпНро▒ро┐ро▓рпБроорпН роЗропро▓рпНрокро╛ройродрпБ. роорпЖродрпБро╡ро╛роХ, роЖро┤рпНроирпНрод роорпВроЪрпНроЪрпБ ро╡ро┐роЯрпБроЩрпНроХро│рпН. роиро╛ройрпН роЙроЩрпНроХро│рпБроЯройрпН роЗро░рпБроХрпНроХро┐ро▒рпЗройрпН.'
    }
  }
};

export function getResponse(key: string, language: LanguageCode = 'en', params: Record<string, string> = {}): string {
  try {
    let response = '';
    if (key.includes('.')) {
      const [category, subKey] = key.split('.');
      const categoryResponses = chatResponses[category] as ChatResponseCategory;
      response = categoryResponses[subKey][language];
    } else {
      const simpleResponse = chatResponses[key] as { [K in LanguageCode]: string };
      response = simpleResponse[language];
    }

    // Replace any parameters in the response
    Object.entries(params).forEach(([key, value]) => {
      response = response.replace(`{${key}}`, value);
    });

    return response;
  } catch (error) {
    console.error('Response error:', error);
    const greetingResponse = chatResponses.greeting as { [K in LanguageCode]: string };
    return greetingResponse[language];
  }
}